/* empty css             */import{g as B,d as A}from"./article-Dp4sW0oI.js";/* empty css                  *//* empty css                 *//* empty css                   */import{d as I,C as m,r as h,a as f,D as S,s as T,c as $,o as j,e,w as a,b as v,g as z,z as b,k as y,h as i,A as F,E as N,F as P,G as U,H as G,i as H,I as J,t as K,J as O,K as R,B as q,j as L,_ as Q}from"./index-CfslgFJt.js";const W={0:"草稿",1:"待审核",2:"审核通过",3:"审核失败"},X={class:"article-index-page"},Z=I({__name:"Index",setup(ee){m.locale("zh-cn");const o=h({status:"",channel_id:"",begin_pubdate:"",end_pubdate:"",page:1,per_page:10}),_=f([]),r=f([]);S(r,()=>{r.value.length===2&&(o.begin_pubdate=m(r.value[0]).format("YYYY-MM-DD"),o.end_pubdate=m(r.value[1]).format("YYYY-MM-DD"))});const g=f(1),p=async()=>{const s=await B(o);g.value=s.total_count,_.value=s.results};T(()=>{p()});const E=s=>{q.confirm("确认删除该文章吗?").then(async()=>{await A(s),L.success("删除成功"),_.value.length===0&&o.page>1&&o.page--,p()})},w=s=>{o.page=s,p()};return(s,t)=>{const u=z,x=F,d=U,C=P,c=N,k=G,D=H,n=J,V=O,M=R;return j(),$("div",X,[e(x,{type:"flex",justify:"space-between"},{default:a(()=>[t[4]||(t[4]=v("span",null,"文章状态",-1)),e(u,{type:"primary",onClick:t[0]||(t[0]=l=>b(y).push("/article/add"))},{default:a(()=>t[3]||(t[3]=[i("新增文章")])),_:1})]),_:1}),e(D,{inline:!0,class:"demo-form-inline"},{default:a(()=>[e(c,{label:"文章状态"},{default:a(()=>[e(C,{placeholder:"全部",clearable:"",modelValue:o.status,"onUpdate:modelValue":t[1]||(t[1]=l=>o.status=l)},{default:a(()=>[e(d,{label:"草稿",value:"0"}),e(d,{label:"待审核",value:"1"}),e(d,{label:"审核失败",value:"2"}),e(d,{label:"全部",value:""})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"发布日期"},{default:a(()=>[e(k,{type:"daterange",modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),"range-separator":"To","start-placeholder":"起始日期","end-placeholder":"截止日期",size:"default"},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(u,{type:"primary",onClick:p},{default:a(()=>t[5]||(t[5]=[i("查询")])),_:1})]),_:1})]),_:1}),e(V,{data:_.value,style:{width:"100%"}},{default:a(()=>[e(n,{type:"index",label:"序号",width:"80px"}),e(n,{prop:"title",label:"标题"}),e(n,{label:"状态"},{default:a(l=>[v("span",null,K(b(W)[l.row.status]),1)]),_:1}),e(n,{prop:"comment_count",label:"评论数"}),e(n,{prop:"pubdate",label:"发布时间"}),e(n,{prop:"like_count",label:"点赞数"}),e(n,{prop:"read_count",label:"阅读数"}),e(n,{label:"操作"},{default:a(l=>[e(u,{type:"primary",onClick:Y=>b(y).push(`/article/add/${l.row.id}`)},{default:a(()=>t[6]||(t[6]=[i("编辑")])),_:2},1032,["onClick"]),e(u,{type:"danger",onClick:Y=>E(l.row.id)},{default:a(()=>t[7]||(t[7]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(M,{onCurrentChange:w,layout:"prev, pager, next",total:g.value},null,8,["total"])])}}}),re=Q(Z,[["__scopeId","data-v-66ce8cb4"]]);export{re as default};
